#Raspberry Play

嘛，今天是三月十号，买的二手的树莓派到了。

外壳拆出来后一开始装不回去了，感受到了自己的愚蠢和无力。

不过还是看到了Raspbian的真容，默认命令行，敲入startx进入图形界面

然后发现能连wifi上不了网，这里应该还有一些什么问题在吧。

之后开始一点一点玩呗····



**1、Putty**

先是试图用putty远程链接，用网线插上或者用屏幕确认无线网链接，再在浏览器里敲入自家路由器的确认页，比如FAST家的是典型的192.168.1.1，确认树莓派的内网IP。

无非是打开putty输入内网IP，之后输入用户名pi，输入密码。

这里就出问题了。

Access Denied。

这个就很让人不爽了。

确认密码没输错之后。（把密码改掉了）

```
sudo passwd pi
sudo passwd --unlock pi
```

确认了ssh服务打开了。

```
netstat -tl
```

确认了位于/etc/ssh的sshd_config的情况。额，不知道为啥，里面的内容和网上的还是天差地别。

然后试了各种各样的方法，还是死活链接不上，想想还有点小绝望。

人家用树莓派动动手能做个一体机出来。

我连远程链接都做不到。贼鸡儿尴尬。

****

3.11日更新

最终的解决办法是······

重刷了一个系统。

嘛，反正跟刷机差不多。也不费多少功夫，刷了就刷了。硬件你就是需要个读卡器，其他没别的。

然后发现最新版系统拒绝了我的putty访问·····

不过还是有解决办法的。

插入读卡器在root目录里添加个名为ssh的无后缀文件。然后插回树莓派。

注意，这里要让树莓派断电后热重启。

不然你用putty去连接还是会有上述问题。

链接成功。

![20130907142345287](http://shumeipai.nxez.com/wp-content/uploads/2013/09/20130907142345287.png)

嗯，就是这么个美妙图案。

**2、VNC**

这之后你可能需要一个图形界面。

然后进入常规操作。

安装VNC，登录好树莓派后，直接在PuTTY输入

```
sudo apt-get install tightvncserver1
```

增加一个桌面

```
tightvncserver1
```

下面会叫你设置一个长度为8的密码 

在这里会让你选择 是否进入仅有视图的桌面，然后分配给你一个桌面。

第一次玩不知道就选了是。

最好还是先不选。不过问题不大

下载VNC 
<http://www.realvnc.com/download/viewer/> 
这里其实是下一个viewer，如果是自己去官网下的，记得看清楚是viewer而不是server。根据自己电脑类型下一个就行，我是下了个win版本的，之后试试看在linux下试试看。到时候再说。

这之后需要你打开vnc服务

在PuTTY上打开树莓派的vncserver

```
vncserver1
```

New ‘X’ desktop is raspberrypi：1 
这个1是系统指派的ID 
![这里写图片描述](http://img.blog.csdn.net/20151122212013210) 
若没有打开这个服务，用VNC登录会提示连接被拒绝 
![这里写图片描述](http://img.blog.csdn.net/20151122211515847) 
用VNC登录树莓派 
![这里写图片描述](http://img.blog.csdn.net/20151122211053933) 
下面会要求输入密码，密码就是在第7步定义的密码。 
树莓派IP后的数字就是系统指派的ID 

若要退出可以直接关闭VNC，但此时vncserver还没有被关闭 
下面的语句关闭了树莓派的vncserver

```
vncserver -kill :1
```

然而还是觉得这玩意很麻烦想着，总觉得还要开启vnc服务，输两次密码，想想都烦燥。

**3、开机自启脚本**

一开始按照网上的教程

- 创建vnc-server配置文件：`sudo vi /etc/init.d/tightvncserver` ,在这个文件里输入如下内容：

```
### BEGIN INIT INFO
# Provides:          tightvncserver
# Required-Start:    $local_fs
# Required-Stop:     $local_fs
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Start/stop tightvncserver
### END INIT INFO

# More details see:
# http://www.penguintutor.com/linux/tightvnc

### Customize this entry
# Set the USER variable to the name of the user to start tightvncserver under
export USER='pi'
### End customization required

eval cd ~$USER

case "$1" in
  start)
    su $USER -c '/usr/bin/tightvncserver -depth 16 -geometry 800x600 :1'
    echo "Starting TightVNC server for $USER "
    ;;
  stop)
    su $USER -c '/usr/bin/tightvncserver -kill :1'
    echo "Tightvncserver stopped"
    ;;
  *)
    echo "Usage: /etc/init.d/tightvncserver {start|stop}"
    exit 1
    ;;
esac
exit 0
```

然后给增加执行权限，并启动服务：

```
sudo chmod +x /etc/init.d/tightvncserver
sudo service tightvncserver stop
sudo service tightvncserver start
```

安装chkconfig， 并将vnc服务设为开机启动：

```
sudo apt-get install chkconfig
chkconfig --add tightvncserver
chkconfig tightvncserver on
```

讲道理应该是没有问题的，前提是你系统版本不够新。

后来发现到chkconfig --add tightvncserver的时候会报错。

missing lsb tags and override。

试了各种方法感觉都没法玩。

也就没了解决问题的办法····。

算了，看看能不能玩下vnc以外的东西，顺便恶补下这个相关的知识。